marathon:
  image: mesosphere/marathon:v1.3.5
  container_name: tf-marathon
  ports:
    - "8080:8080"
  command: --master zk://zookeeper:2181/mesos --zk zk://zookeeper:2181/marathon
  links:
    - zookeeper
    - mesos-slave

mesos-master:
  image: mesosphere/mesos-master:1.0.0
  environment:
    MESOS_PORT: 5050
    MESOS_ZK: zk://zookeeper:2181/mesos
    MESOS_QUORUM: 1
    MESOS_REGISTRY: in_memory
  ports:
    - "5050:5050"
  links:
    - zookeeper
    - mesos-slave

mesos-slave:
  image: mesosphere/mesos-slave:1.0.0
  environment:
    MESOS_PORT: 5051
    MESOS_MASTER: zk://zookeeper:2181/mesos
    MESOS_SWITCH_USER: 0
    MESOS_CONTAINERIZERS: docker,mesos
    MESOS_WORK_DIR: /tmp
  ports:
    - "5051:5051"
  links:
    - zookeeper
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - /cgroup:/cgroup
    - /sys:/sys
    - /usr/local/bin/docker:/usr/local/bin/docker

test:
  build: test
  volumes:
    - ./:/go/src/github.com/Banno/terraform-provider-marathon/
  links:
    - marathon

zookeeper:
  image: jplock/zookeeper:3.4.9
  ports:
    - "2181:2181"
